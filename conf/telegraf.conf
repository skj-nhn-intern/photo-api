# Telegraf Configuration for Photo API
# 환경변수: INFLUX_URL, INFLUX_TOKEN, INFLUX_ORG, INFLUX_BUCKET (systemd EnvironmentFile=/etc/default/telegraf)
# 실행: telegraf --config /opt/telegraf/telegraf.conf

[agent]
  interval = "10s"
  round_interval = true

[global_tags]
  app = "photo-api"
  env = "production"

[[outputs.influxdb_v2]]
  urls = ["${INFLUX_URL}"]
  token = "${INFLUX_TOKEN}"
  organization = "${INFLUX_ORG}"
  bucket = "${INFLUX_BUCKET}"

[[inputs.cpu]]
  percpu = true
  totalcpu = true
  collect_cpu_time = false
  report_active = false

[[inputs.mem]]

[[inputs.system]]

[[inputs.disk]]
  ignore_fs = ["tmpfs", "devtmpfs", "devfs", "iso9660", "overlay", "autofs", "squashfs"]

[[inputs.net]]

[[inputs.prometheus]]
  urls = ["http://127.0.0.1:8000/metrics"]
  metric_version = 2
