# ============================================
# Photo API - Environment Variables Example
# ============================================
# 이 파일을 .env로 복사하고 실제 값으로 수정하세요:
# cp conf/env.example .env

# ============================================
# Application Settings
# ============================================
APP_NAME="Photo API"
APP_VERSION="1.0.0"
ENVIRONMENT="production"  # development, staging, production

# ============================================
# Security
# ============================================
# JWT 토큰 서명에 사용되는 비밀 키 (최소 32자 권장)
# 생성 방법: openssl rand -hex 32
JWT_SECRET_KEY="your-secret-key-here-min-32-chars-recommended"

# JWT 토큰 만료 시간 (분)
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30

# ============================================
# Database
# ============================================
# PostgreSQL 예시
DATABASE_URL="postgresql://user:password@localhost:5432/photo_db"

# MySQL 예시
# DATABASE_URL="mysql+asyncmy://user:password@localhost:3306/photo_db"

# SQLite 예시 (개발용)
# DATABASE_URL="sqlite+aiosqlite:///./photo.db"

# ============================================
# NHN Cloud - Object Storage
# ============================================
# Object Storage endpoint (리전별로 다름)
# KR1 (판교): https://kr1-api-object-storage.nhncloudservice.com
# KR2 (평촌): https://kr2-api-object-storage.nhncloudservice.com
NHN_OBJECT_STORAGE_ENDPOINT="https://kr1-api-object-storage.nhncloudservice.com"

# Object Storage 인증 정보
# Console > Object Storage > API Endpoint 설정에서 확인
NHN_OBJECT_STORAGE_ACCESS_KEY="your-access-key"
NHN_OBJECT_STORAGE_SECRET_KEY="your-secret-key"

# 버킷 이름
NHN_OBJECT_STORAGE_BUCKET="photo-api"

# ============================================
# NHN Cloud - CDN
# ============================================
# CDN 도메인 (https:// 포함)
NHN_CDN_DOMAIN="https://your-cdn-domain.toastcdn.net"

# CDN Auth Token 발급용 비밀 키
# Console > CDN > 도메인 설정 > 인증 토큰에서 설정
NHN_CDN_AUTH_KEY="your-cdn-auth-key"

# Auth Token 만료 시간 (초)
NHN_CDN_AUTH_TOKEN_EXPIRE_SECONDS=3600

# 이미지 접근 제어 (URL 유출 시 제3자 열람 방지)
# True: 이미지를 백엔드 경유(프록시)로 제공, URL에 짧은 유효기간 토큰 사용 (권장)
# False: CDN URL 직접 반환 (기존 방식, URL 알면 만료 전까지 누구나 열람 가능)
IMAGE_ACCESS_USE_PROXY=true
# 이미지 토큰 유효 시간(초). 프록시 사용 시에만 적용
IMAGE_TOKEN_EXPIRE_SECONDS=120

# ============================================
# Observability - Logging (Loki + Promtail)
# ============================================
# Loki 서버 주소 (끝에 / 없이, /loki/api/v1/push 자동 추가됨)
LOKI_URL="http://192.168.4.73:3100"

# 인스턴스 식별용 IP (로그 레이블에 사용)
# 자동 감지되지만 명시적으로 설정 가능
INSTANCE_IP="192.168.4.100"

# ============================================
# Observability - Metrics (Prometheus)
# ============================================
# 메트릭은 앱의 /metrics 엔드포인트로 제공됩니다.
# Prometheus 서버에서 해당 인스턴스(예: http://인스턴스:8000/metrics)를 스크래핑 대상으로 등록하세요.
#
# Pushgateway 연동 (선택): 추후 Pushgateway 인스턴스 사용 시 아래 설정
# PROMETHEUS_PUSHGATEWAY_URL="http://pushgateway:9091"
# PROMETHEUS_PUSH_INTERVAL_SECONDS=30

# ============================================
# Logging Configuration
# ============================================
# 로그 레벨: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL="INFO"

# 로그 파일 경로
LOG_FILE_PATH="/var/log/photo-api/app.log"
ERROR_LOG_FILE_PATH="/var/log/photo-api/error.log"

# ============================================
# CORS Settings
# ============================================
# 허용할 오리진 (쉼표로 구분)
# 개발 환경: http://localhost:3000,http://localhost:5173
# 프로덕션: https://yourdomain.com
CORS_ORIGINS="*"

# ============================================
# API Rate Limiting (선택사항)
# ============================================
# RATE_LIMIT_PER_MINUTE=60
# RATE_LIMIT_BURST=10

# ============================================
# File Upload Settings
# ============================================
# 최대 파일 크기 (MB)
MAX_FILE_SIZE_MB=10

# 허용할 파일 확장자 (쉼표로 구분)
ALLOWED_FILE_EXTENSIONS="jpg,jpeg,png,gif,webp"

# ============================================
# Development Settings
# ============================================
# 개발 모드 활성화 (자세한 에러 메시지, 자동 리로드)
# DEBUG=true

# API 문서 활성화 (프로덕션에서는 false 권장)
# ENABLE_DOCS=true
